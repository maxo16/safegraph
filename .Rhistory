a3 <- rnorm(100, mean = 5, sd = 0.05)
y <- a1 + a2 + a3
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
# X_hat <- solve(A, y)
X_hat <- ginv(A)%*%y
X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
View(y)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- a1*rnorm(100, mean = 2, sd = 0.05) + a2*rnorm(100, mean = 4, sd = 0.05) + a3*rnorm(100, mean = 5, sd = 0.05)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
# X_hat <- solve(A, y)
X_hat <- ginv(A)%*%y
# X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
library(MASS)
# X_hat <- solve(A, y)
X_hat <- ginv(A)%*%y
# X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- rep(1,100) + a1*rnorm(100, mean = 2, sd = 0.05) + a2*rnorm(100, mean = 4, sd = 0.05) + a3*rnorm(100, mean = 5, sd = 0.05)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
# X_hat <- solve(A, y)
X_hat <- ginv(A)%*%y
# X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- rep(1,100) + a1*rnorm(100, mean = 2, sd = 1) + a2*rnorm(100, mean = 4, sd = 1) + a3*rnorm(100, mean = 5, sd = 1)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
# X_hat <- solve(A, y)
X_hat <- ginv(A)%*%y
# X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- rep(1,100) + a1*rnorm(100, mean = 2, sd = 10) + a2*rnorm(100, mean = 4, sd = 10) + a3*rnorm(100, mean = 5, sd = 10)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
# X_hat <- solve(A, y)
X_hat <- ginv(A)%*%y
# X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
library(MASS)
# X_hat <- solve(A, y)
X_hat <- ginv(A)%*%y
# X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- rep(1,100) + a1*rnorm(100, mean = 2, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
# X_hat <- solve(A, y)
X_hat <- ginv(A)%*%y
# X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- rep(1,100) + a1*rnorm(100, mean = 2, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
library(MASS)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- rep(1,100) + a1*rnorm(100, mean = 2, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- a1*rnorm(100, mean = 2, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
y <- a1*rnorm(100, mean = 12, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
12+4+5
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- 1:100
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- 1:100
y <- a1*rnorm(100, mean = 12, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- rnorm(100, mean = 250, sd = 50)
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- rnorm(100, mean = 75, sd = 50)
y <- a1*rnorm(100, mean = 12, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- rnorm(100, mean = 250, sd = 50)
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- rnorm(100, mean = 75, sd = 50)
y <- a1*rnorm(100, mean = 2, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
library(MASS)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- rnorm(100, mean = 250, sd = 50)
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- rnorm(100, mean = 75, sd = 50)
# y <- a1*rnorm(100, mean = 2, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- 2*a1 + 4*a2 + 5*a3
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
library(MASS)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- rnorm(100, mean = 250, sd = 50)
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- rnorm(100, mean = 75, sd = 50)
# y <- a1*rnorm(100, mean = 2, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
# y <- 2*a1 + 4*a2 + 5*a3
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- rnorm(100, mean = 250, sd = 50)
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- rnorm(100, mean = 75, sd = 50)
# y <- a1*rnorm(100, mean = 2, sd = 4) + a2*rnorm(100, mean = 4, sd = 7) + a3*rnorm(100, mean = 5, sd = 2)
y <- 2*a1 + 4*a2 + 5*a3
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- rnorm(100, mean = 250, sd = 50)
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- rnorm(100, mean = 75, sd = 50)
y <- a1*rnorm(100, mean = 2, sd = 0.01) + a2*rnorm(100, mean = 4, sd = 0.01) + a3*rnorm(100, mean = 5, sd = 0.01)
# y <- 2*a1 + 4*a2 + 5*a3
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
# a1 <- 1:100*rnorm(100, mean = 2)
# a2 <- rnorm(100, mean = 0, sd = 20)*rnorm(100, mean = 4)
# a3 <- rnorm(100, mean = 50, sd = 20)*rnorm(100, mean = 5)
a1 <- rnorm(100, mean = 250, sd = 50)
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- rnorm(100, mean = 75, sd = 50)
y <- a1*rnorm(100, mean = 2, sd = 0.01) + a2*rnorm(100, mean = 4, sd = 0.01) + a3*rnorm(100, mean = 5, sd = 0.01) + rnorm(100, mean = 0.1, sd = 1)
# y <- 2*a1 + 4*a2 + 5*a3
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
plot( y ~ A[,1])
View(A)
plot( y ~ A[,2])
plot( y ~ A[,3])
plot( y ~ A[,4])
View(X_hat)
a1 <- 1:100
a2 <- 1:100
a3 <- 1:100
# a1 <- rnorm(100, mean = 250, sd = 50)
# a2 <- rnorm(100, mean = 100, sd = 50)
# a3 <- rnorm(100, mean = 75, sd = 50)
y <- a1*rnorm(100, mean = 2, sd = 0.01) + a2*rnorm(100, mean = 4, sd = 0.01) + a3*rnorm(100, mean = 5, sd = 0.01) + rnorm(100, mean = 0.1, sd = 1)
# y <- 2*a1 + 4*a2 + 5*a3
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
# a1 <- 1:100
# a2 <- 1:100
# a3 <- 1:100
a1 <- rnorm(100, mean = 250, sd = 50)
a2 <- rnorm(100, mean = 100, sd = 50)
a3 <- rnorm(100, mean = 75, sd = 50)
y <- a1*rnorm(100, mean = 2, sd = 0.01) + a2*rnorm(100, mean = 4, sd = 0.01) + a3*rnorm(100, mean = 5, sd = 0.01) + rnorm(100, mean = 0.1, sd = 1)
# y <- 2*a1 + 4*a2 + 5*a3
y <- matrix(y, ncol = 1)
A <- matrix(c(rep(1,100), a1, a2, a3), ncol = 4)
X_hat <- ginv(A)%*%y
View(X_hat)
X_hat <- solve(t(A)%*%A)%*%t(A)%*%y
View(X_hat)
View(country_list)
rbinom(10,1,0.5)
rbinom(10,1,0.5)
rbinom(1,10,0.5)
rbinom(1,15,0.5)
rbinom(1,20,0.5)
rbinom(10,1,0.5)
library(readr)
library(dplyr)
library(tidyr)
library(rgdal)
library(sp)
library(leaflet)
library(tidyr)
library(googlesheets)
parcel_proposals <- read_csv("./inputs/parcel_proposals.csv", col_types = cols(APN = col_character(), type = col_character()))
row.names(parcel_proposals) <- parcel_proposals$APN
parcel_proposals <- read_csv("./inputs/parcel_proposals.csv", col_types = cols(APN = col_character(), type = col_character()))
getwd()
as.numeric(1,200)
as.numeric("1,200")
?spTransform
CRS(proj4string(data.shape)
)
data.shape@proj4string
getwd()
install.packages("installr")
version()
version
library(leaflet)
libPaths()
libPaths
.libPaths()
library(leaflet)
.libPaths()
library(dplyr)
library(dplyr)
.libPaths()
library(leaflet)
installed.packages()
class(installed.packages())
View(installed.packages())
install.packages("leaflet")
library(leaflet)
libs <- installed.packages()
View(libs[,1])
class(libs[,1])
install.packages(libs[,1])
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
save.image()
.restartR()
.rs.restartR()
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
install.packages(libs[, 1])
librar(leaflet)
library(leaflet)
install.packages("yaml")
library(yaml)
help
"Yikes!"
a = matrix(c(3,4), ncol = 2)
a
b = matrix(c(1,2,2,3), ncol = 2)
b
a%*%b
log10(-1/4)
?sample.int
sample(1:13)
knitr::opts_chunk$set(echo = TRUE)
library(readr)
setwd("GitHub/safegraph")
rm(list = ls())
test <- read_csv("GitHub/safegraph/test.csv")
list.files()
test <- read_csv("GitHub\\safegraph\\test.csv")
test <- read_csv("~GitHub\\safegraph\\test.csv")
test <- read_csv("C:/Users/Max/Documents/GitHub/safegraph/test.csv")
library(dplyr)
View(test)
?filter
# Filter out the rows with no cbgs
test <- test %>% filter(visitor_home_cbgs != "{}")
test$visitor_home_cbgs[1]
library(rjson)
?fromJSON()
fromJSON(json_str = test$visitor_home_cbgs[1])
typeof(fromJSON(json_str = test$visitor_home_cbgs[1]))
unlist(fromJSON(json_str = test$visitor_home_cbgs[1]))
typeof(unlist(fromJSON(json_str = test$visitor_home_cbgs[1])))
data.frame(fromJSON(json_str = test$visitor_home_cbgs[1])))
data.frame(fromJSON(json_str = test$visitor_home_cbgs[1]))
temp_vec <- unlist(fromJSON(json_str = test$visitor_home_cbgs[1]))
names(temp_vec)
rep("a",5)
type(vector("list",5))
typeof(vector("list",5))
# Make a list to store everything
results <- vector("list", nrow(test))
length(results)
test <- test %>% select(c(location_name, visitor_home_cbgs))
data.frame("place" = rep("tacos", length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec)
?mapply
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
helper_function <- function(place, cbgs){
temp_vec <- unlist(fromJSON(json_str = cbgs))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
helper_function(place = test$location_name[1], cbgs = test$visitor_home_cbgs[1])
do.call("rbind", mapply(helper_function, place = test$location_name, cbgs = test$visitor_home_cbgs))
mapply(helper_function, place = test$location_name, cbgs = test$visitor_home_cbgs)
helper_function(place = test$location_name[2], cbgs = test$visitor_home_cbgs[2])
mapply(sum, 1:2, 2:3)
do.call("rbind", mapply(helper_function, place = test$location_name, cbgs = test$visitor_home_cbgs))
?do.call
do.call("rbind", mapply(helper_function, place = test$location_name, cbgs = test$visitor_home_cbgs))
rbind(helper_function(place = test$location_name[2], cbgs = test$visitor_home_cbgs[2]), helper_function(place = test$location_name[2], cbgs = test$visitor_home_cbgs[2]))
do.call("rbind", list(mapply(helper_function, place = test$location_name, cbgs = test$visitor_home_cbgs)))
result <- do.call("rbind", list(mapply(helper_function, place = test$location_name, cbgs = test$visitor_home_cbgs)))
typeof(result)
class(result)
result
dim(result)
mapply(helper_function, place = test$location_name, cbgs = test$visitor_home_cbgs)
View(rbind(helper_function(place = test$location_name[1], cbgs = test$visitor_home_cbgs[1]), helper_function(place = test$location_name[2], cbgs = test$visitor_home_cbgs[2])))
# Change this to take in a df instead
helper_function <- function(df){
place <- df[1,1]
cbgs  <- df[1,2]
temp_vec <- unlist(fromJSON(json_str = cbgs))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
helper_function(test)
helper_function(test[1,])
helper_function(test[1,])
# Change this to take in a df instead
helper_function <- function(df){
place <- df[1,1]
cbgs  <- df[[1,2]]
temp_vec <- unlist(fromJSON(json_str = cbgs))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
helper_function(test[1,])
View(helper_function(test[1,]))
# Change this to take in a df instead
helper_function <- function(df){
place <- df[1,1]
cbgs  <- df[[1,2]]
temp_vec <- unlist(fromJSON(json_str = cbgs))
print(temp_vec)
print(rep(place, length(temp_vec)))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
View(helper_function(test[1,]))
# Change this to take in a df instead
helper_function <- function(df){
place <- df[[1,1]]
cbgs  <- df[[1,2]]
temp_vec <- unlist(fromJSON(json_str = cbgs))
# print(temp_vec)
# print(rep(place, length(temp_vec)))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
View(helper_function(test[1,]))
helper_function(test[1,])
?apply
apply(test, 2, helper_function)
apply(test, 1, helper_function)
# Change this to take in a df instead
helper_function <- function(df){
print(df)
place <- df[[1,1]]
cbgs  <- df[[1,2]]
temp_vec <- unlist(fromJSON(json_str = cbgs))
# print(temp_vec)
# print(rep(place, length(temp_vec)))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
# View(helper_function(test[1,]))
apply(test, 1, helper_function)
# Change this to take in a df instead
helper_function <- function(df){
place <- df[[1]]
cbgs  <- df[[2]]
temp_vec <- unlist(fromJSON(json_str = cbgs))
# print(temp_vec)
# print(rep(place, length(temp_vec)))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
# View(helper_function(test[1,]))
apply(test, 1, helper_function)
result <- do.call("rbind", apply(test, 1, helper_function))
View(result)
rm(list = ls())
library(readr)
library(dplyr)
library(rjson)
# Change this to take in a df instead
helper_function <- function(df){
place <- df[[1]]
cbgs  <- df[[2]]
temp_vec <- unlist(fromJSON(json_str = cbgs))
# print(temp_vec)
# print(rep(place, length(temp_vec)))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
# View(helper_function(test[1,]))
# Import the dataset
test <- read_csv("C:/Users/Max/Documents/GitHub/safegraph/test.csv")
# Filter out the rows with no cbgs
test <- test %>% filter(visitor_home_cbgs != "{}")
# Make a list to store everything
results <- vector("list", nrow(test))
# Select only the needed columns
test <- test %>% select(c(location_name, visitor_home_cbgs))
result <- do.call("rbind", apply(test, 1, helper_function))
View(result)
rm(results)
?data
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2
library(readr)
library(dplyr)
library(rjson)
# Chunk 3
# Change this to take in a df instead
helper_function <- function(df){
place <- df[[1]]
cbgs  <- df[[2]]
temp_vec <- unlist(fromJSON(json_str = cbgs))
# print(temp_vec)
# print(rep(place, length(temp_vec)))
return(data.frame("place" = rep(place, length(temp_vec)), "home_cbg" = names(temp_vec), "visitor_counts" = temp_vec))
}
# View(helper_function(test[1,]))
# Chunk 4
# Import the dataset
test <- read_csv("C:/Users/Max/Documents/GitHub/safegraph/test.csv")
# Filter out the rows with no cbgs
test <- test %>% filter(visitor_home_cbgs != "{}")
# Select only the needed columns
test <- test %>% select(c(location_name, visitor_home_cbgs))
cleaned_data <- do.call("rbind", apply(test, 1, helper_function))
View(cleaned_data)
View(cleaned_data)
